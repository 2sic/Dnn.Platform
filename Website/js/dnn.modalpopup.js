(function (e, t) { e.dnnModal = { load: function () { try { if (parent.location.href !== undefined) { var e = parent; var t = e.parent; if (typeof t.$find != "undefined") { if (location.href.indexOf("popUp") == -1 || e.location.href.indexOf("popUp") > -1) { var n = e.jQuery("#iPopUp"); var r = n.dialog("option", "refresh"); var i = n.dialog("option", "closingUrl"); var s = n.dialog("option", "minWidth"); var o = n.dialog("option", "minHeight"); var u = n.dialog("option", "showReturn"); if (!i) { i = location.href } if (n.dialog("isOpen") === true) { n.dialog("option", { close: function (e, t) { dnnModal.refreshPopup({ url: i, width: s, height: o, showReturn: u, refresh: r }) } }).dialog("close") } } else { e.jQuery("#iPopUp").dialog({ autoOpen: false, title: document.title }) } } } return true } catch (a) { return false } }, show: function (n, r, i, s, o, u) { var a = t("#iPopUp"); if (a.length == 0) { a = t('<iframe id="iPopUp" src="about:blank" scrolling="auto" frameborder="0"></iframe>'); t(document.body).append(a) } else { a.attr("src", "about:blank") } t(document).find("html").css("overflow", "hidden"); a.dialog({ modal: true, autoOpen: true, dialogClass: "dnnFormPopup", position: "center", minWidth: s, minHeight: i, maxWidth: 1920, maxHeight: 1080, resizable: true, closeOnEscape: true, refresh: o, showReturn: r, closingUrl: u, close: function (e, t) { dnnModal.closePopUp(o, u) } }).width(s - 11).height(i - 11); var f = dnn.addIframeMask(t(".ui-widget-overlay")[0]); if (f != null) { f.style.zIndex = 1 } if (a.parent().find(".ui-dialog-title").next("a.dnnModalCtrl").length === 0) { var l = t('<a class="dnnModalCtrl"></a>'); a.parent().find(".ui-dialog-titlebar-close").wrap(l); var c = t('<a href="#" class="dnnToggleMax"><span>Max</span></a>'); a.parent().find(".ui-dialog-titlebar-close").before(c); c.click(function (n) { n.preventDefault(); var r = t(e), i, s; if (a.data("isMaximized")) { i = a.data("height"); s = a.data("width"); a.data("isMaximized", false) } else { a.data("height", a.dialog("option", "minHeight")).data("width", a.dialog("option", "minWidth")).data("position", a.dialog("option", "position")); i = r.height() - 46; s = r.width() - 40; a.data("isMaximized", true) } a.dialog({ height: i, width: s }); a.dialog({ position: "center" }) }) } var h = function () { var e = t('<div class="dnnLoading"></div>'); e.css({ width: a.width(), height: a.height() }); a.before(e) }; var p = function () { a.prev(".dnnLoading").remove() }; h(); a[0].src = n; a.bind("load", function () { p() }); if (r.toString() == "true") { return false } }, closePopUp: function (e, n) { var r = parent; var i = r.jQuery("#iPopUp"); if (typeof e === "undefined" || e == null) { e = true } if (e.toString() == "true") { if (typeof n === "undefined" || n == "") { n = r.location.href } r.location.href = n; if (t(".ui-widget-overlay").length > 0) { dnn.removeIframeMask(t(".ui-widget-overlay")[0]) } i.hide() } else { if (t(".ui-widget-overlay").length > 0) { dnn.removeIframeMask(t(".ui-widget-overlay")[0]) } i.dialog("option", "close", null).dialog("close") } t(r.document).find("html").css("overflow", "") }, refreshPopup: function (e) { var t = parent; var n = t.parent; if (t.location.href !== n.location.href && t.location.href !== e.url) { n.dnnModal.show(e.url, e.showReturn, e.height, e.width, e.refresh, e.closingUrl) } else { dnnModal.closePopUp(e.refresh, e.url) } } }; e.dnnModal.load() })(window, jQuery)