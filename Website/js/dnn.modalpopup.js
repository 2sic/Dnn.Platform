(function(h,d){h.dnnModal={load:function(){try{if(void 0!==parent.location.href){var a=parent;if("undefined"!=typeof a.parent.$find){var f=-1==location.href.indexOf("popUp"),b=-1<a.location.href.indexOf("popUp");if(f||b){var e=a.jQuery("#iPopUp"),d=e.dialog("option","refresh"),g=e.dialog("option","closingUrl"),c=e.dialog("option","minWidth"),l=e.dialog("option","minHeight"),m=e.dialog("option","showReturn");b||(g=parent.location.href);g||(g=location.href);!0===e.dialog("isOpen")&&e.dialog("option",
{close:function(a,b){dnnModal.refreshPopup({url:g,width:c,height:l,showReturn:m,refresh:d})}}).dialog("close")}else a.jQuery("#iPopUp").dialog({autoOpen:!1,title:document.title})}}return!0}catch(h){return!1}},show:function(a,f,b,e,k,g){var c=d("#iPopUp");0==c.length?(c=d('<iframe id="iPopUp" src="about:blank" scrolling="auto" frameborder="0"></iframe>'),d(document.body).append(c)):c.attr("src","about:blank");d(document).find("html").css("overflow","hidden");c.dialog({modal:!0,autoOpen:!0,dialogClass:"dnnFormPopup",
position:"center",minWidth:e,minHeight:b,maxWidth:1920,maxHeight:1080,resizable:!0,closeOnEscape:!0,refresh:k,showReturn:f,closingUrl:g,close:function(c,a){dnnModal.closePopUp(k,g)}}).width(e-11).height(b-11);b=dnn.addIframeMask(d(".ui-widget-overlay")[0]);null!=b&&(b.style.zIndex=1);0===c.parent().find(".ui-dialog-title").next("a.dnnModalCtrl").length&&(b=d('<a class="dnnModalCtrl"></a>'),c.parent().find(".ui-dialog-titlebar-close").wrap(b),b=d('<a href="#" class="dnnToggleMax"><span>Max</span></a>'),
c.parent().find(".ui-dialog-titlebar-close").before(b),b.click(function(a){a.preventDefault();var b=d(h);c.data("isMaximized")?(a=c.data("height"),b=c.data("width"),c.data("isMaximized",!1)):(c.data("height",c.dialog("option","minHeight")).data("width",c.dialog("option","minWidth")).data("position",c.dialog("option","position")),a=b.height()-46,b=b.width()-40,c.data("isMaximized",!0));c.dialog({height:a,width:b});c.dialog({position:"center"})}));(function(){var a=d('<div class="dnnLoading"></div>');
a.css({width:c.width(),height:c.height()});c.before(a)})();c[0].src=a;c.bind("load",function(){c.prev(".dnnLoading").remove()});if("true"==f.toString())return!1},closePopUp:function(a,f){var b=parent,e=b.jQuery("#iPopUp");if("undefined"===typeof a||null==a)a=!0;if("true"==a.toString()){if("undefined"===typeof f||""==f)f=b.location.href;b.location.href=f;e.hide()}else e.dialog("option","close",null).dialog("close");d(b.document).find("html").css("overflow","");dnn.removeIframeMask(d(".ui-widget-overlay")[0])},
refreshPopup:function(a){var d=parent,b=d.parent;d.location.href!==b.location.href&&d.location.href!==a.url?b.dnnModal.show(a.url,a.showReturn,a.height,a.width,a.refresh,a.closingUrl):dnnModal.closePopUp(a.refresh,a.url)}};h.dnnModal.load()})(window,jQuery);