[JavaScript:{ jsname: "Knockout" }]
[JavaScript:{ jsname: "Knockout.Mapping" }]
[JavaScript:{ path: "~/DesktopModules/Dnn/DynamicContentManager/ClientScripts/manager.js"}]
[JavaScript:{ path: "~/DesktopModules/Dnn/DynamicContentManager/ClientScripts/contentTypes.js"}]
[JavaScript:{ path: "~/DesktopModules/Dnn/DynamicContentManager/ClientScripts/dataTypes.js"}]
[JavaScript:{ path: "~/DesktopModules/Dnn/DynamicContentManager/ClientScripts/templates.js"}]
[JavaScript:{ path: "~/DesktopModules/Dnn/DynamicContentManager/ClientScripts/settings.js"}]
[JavaScript:{ path: "~/DesktopModules/Dnn/DynamicContentManager/ClientScripts/pager.js"}]
[JavaScript:{ path: "~/DesktopModules/Dnn/DynamicContentManager/ClientScripts/util.js"}]
[JavaScript:{ path: "~/Resources/Shared/scripts/dnn.jquery.js"}]
[Css:{ path: "//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"}]

<div id="DCCmanager-[ModuleContext:ModuleId]" class="dccContainer">
    <div class="dccNavBar">
        <div class="dccLogo">
            <div class="top">[Resx:{key:"DCC"}]</div>
            <div class="bottom">[Resx:{key:"Admin"}]</div>
        </div>
        <div class="dccMenu">
            <ul>
                <li data-panel-id="#content-types-panel" data-bind="click: selectContentTypes">
                    <i class="fa fa-table"></i>
                    <div>[Resx:{key:"ContentTypes"}]</div>
                </li>
                <li data-panel-id="#data-types-panel" data-bind="click: selectDataTypes">
                    <i class="fa fa-list-alt"></i>
                    <div>[Resx:{key:"DataTypes"}]</div>
                </li>
                <li data-panel-id="#content-templates-panel" data-bind="click: selectTemplates">
                    <i class="fa fa-file-text-o"></i>
                    <div>[Resx:{key:"Templates"}]</div>
                </li>
                <li data-panel-id="#settings-panel" data-bind="click: selectSettings">
                    <i class="fa fa-gear"></i>
                    <div>[Resx:{key:"Settings"}]</div>
                </li>
            </ul>
        </div>
    </div>

    <div class="dccPanels">
        <div class="dccPanel" id="content-types-panel" data-bind="with: contentTypes">
            <div class="dccHeading" data-bind="text: heading()"></div>
            <div class="dccSubPanel">
                <div class="dccSearchPanel">
                    <input type="text" class="dccSearchBox" data-bind="value: searchText, valueUpdate: 'afterkeydown', attr: { 'placeholder': $root.resx.findContentType}"/>
                    <a class="dccButton right">[Resx:{key:"AddContentType"}]</a>
                </div>
                <table class="dccTable">
                    <thead>
                    <tr>
                        <th>[Resx:{key:"ContentType"}]</th>
                        <th>[Resx:{key:"Created"}]</th>
                        <th>[Resx:{key:"System"}]</th>
                    </tr>
                    </thead>
                    <tbody data-bind="foreach: results">
                    <tr>
                        <td data-bind="text: name"></td>
                        <td data-bind="text: created"></td>
                        <td><i class="fa fa-check" data-bind="visible: isSystem"></i></td>
                    </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                        <td colspan="3">
                            <div>
                                <div class="left" data-bind="html: pagerItemsDescription"></div>
                                <ul class="right pager" data-bind="visible: pagerVisible">
                                    <li><a data-bind="click: prev, attr: { 'class': pagerPrevClass }"></a></li>
                                    <li><a data-bind="click: next, attr: { 'class': pagerNextClass }"></a></li>
                                </ul>
                                <div class="right" data-bind="html: pagerDescription"></div>
                            </div>
                        </td>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="dccPanel" id="data-types-panel" style="left: -850px" data-bind="with: dataTypes">
            <div class="dccHeading" data-bind="text: heading()"></div>
            <div class="dccSubPanel">
                <div class="dccSearchPanel">
                    <input type="text" class="dccSearchBox" data-bind="value: searchText, valueUpdate: 'afterkeydown', attr: { 'placeholder': $root.resx.findDataType}"/>
                    <a class="dccButton right" data-bind="click: addDataType">[Resx:{key:"AddDataType"}]</a>
                </div>
                <table class="dccTable" id="createDataType">
                    <tbody id='dataTypes-addbody' class="edit-body">
                    </tbody>
                </table>
                <table class="dccTable">
                    <thead>
                        <tr>
                            <th>[Resx:{key:"DataType"}]</th>
                            <th>[Resx:{key:"Created"}]</th>
                            <th>[Resx:{key:"System"}]</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: results">
                        <tr data-bind="click: $parent.editDataType">
                            <td data-bind="text: name"></td>
                            <td data-bind="text: created"></td>
                            <td><i class="fa fa-check-square-o" data-bind="visible: isSystem"></i><i class="fa fa-square-o" data-bind="visible: !isSystem"></i></td>
                        </tr>
                    </tbody>
                    <tbody id='dataTypes-editbody' class="edit-body">
                        <tr class="edit-row" id="dataTypes-editrow">
                            <td colspan="3" data-bind="with: selectedDataType">
                                <div>
                                    <div>
                                        <label>[Resx:{key:"Name"}]</label>
                                        <input type="text" data-bind="value: name, enable: !isSystem() || parentViewModel.isSystemUser" />
                                    </div>
                                    <div>
                                        <label>[Resx:{key:"BaseType"}]</label>
                                        <select data-bind="value: baseType, valueAllowUnset: false, options: $parent.baseDataTypeOptions, optionsText: 'name', optionsValue: 'value', enable: !isSystem() || parentViewModel.isSystemUser"></select>
                                    </div>
                                    <div class="toggle" data-bind="css: { disabled: !(parentViewModel.isSystemUser && isAddMode()) }">
                                        <span><input type="checkbox" data-bind="checked: isSystem, enable: parentViewModel.isSystemUser && isAddMode()"></span>
                                        <span class="label">[Resx:{key:"SystemType"}]</span>
                                    </div>

                                    <div class="buttons">
                                        <a class="secondarybtn" id="dataTypes-deleteButton" data-bind="click: deleteType, visible: !isAddMode()">[Resx:{key:"Delete"}]</a>
                                        <a class="secondarybtn" data-bind="click: cancel">[Resx:{key:"Cancel"}]</a>
                                        <a class="primarybtn" data-bind="click: saveType">[Resx:{key:"Save"}]</a>
                                    </div>

                                    <div class="clear"></div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                        <td colspan="3">
                            <div>
                                <div class="left" data-bind="html: pagerItemsDescription"></div>
                                <ul class="right pager" data-bind="visible: pagerVisible">
                                    <li><a data-bind="click: prev, attr: { 'class': pagerPrevClass }"></a></li>
                                    <li><a data-bind="click: next, attr: { 'class': pagerNextClass }"></a></li>
                                </ul>
                                <div class="right" data-bind="html: pagerDescription"></div>
                            </div>
                        </td>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="dccPanel" id="content-templates-panel" style="left: -850px">
            <div class="dccHeading" ></div>
            <div class="dccSubPanel">
                <div class="dccSearchPanel">
                    <input type="text" class="dccSearchBox" placeholder='[Resx:{key:"FindTemplate"}]' />
                    <a class="dccButton dccRight">[Resx:{key:"AddTemplate"}]</a>
                </div>
                <table class="dccTable">
                    <thead>
                        <tr>
                            <th>[Resx:{key:"Template"}]</th>
                            <th>[Resx:{key:"ContentType"}]</th>
                            <th>[Resx:{key:"System"}]</th>
                            <th>&nbsp;</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="dccPanel" id="settings-panel" style="left: -850px">
            <div class="dccHeading"></div>
            <div class="dccSubPanel">

            </div>
        </div>
    </div>

    <div id="loadingbar" style="display: none;">
        <div></div>
    </div>

    <div id="mask"></div>
    <div id="confirmation-dialog" class="dnnFormPopup dnnClear"  style="display: none;">
        <div class="dnnDialogHeader">[Resx: {key: "Confirm"}]</div>
        <div class="dnnDialog"></div>
        <div class="buttonpanel">
            <a id="confirmbtn" class="dnnPrimaryAction"></a>
            <a id="cancelbtn" class="dnnSecondaryAction"></a>
        </div>
    </div>

</div>

<script language="javascript" type="text/javascript">
    var moduleId = parseInt("[ModuleContext:ModuleId]");
    var str = "[ModuleContext:IsSuperUser]";
    var isSystemUser = (str.toLowerCase() === "true");

    jQuery(document).ready(function ($) {
        var localizedSettings = {
            contentTypes: '[Resx:{key:"ContentTypes"}]',
            contentTypes_NoPagerFormat: '[Resx:{key:"ContentTypes_NoPagerFormat"}]',
            contentTypes_PagerFormat: '[Resx:{key:"ContentTypes_PagerFormat"}]',
            dataTypes: '[Resx:{key:"DataTypes"}]',
            dataTypes_NoPagerFormat: '[Resx:{key:"DataTypes_NoPagerFormat"}]',
            dataTypes_PagerFormat: '[Resx:{key:"DataTypes_PagerFormat"}]',
            findContentType: '[Resx:{key:"FindContentType"}]',
            findDataType: '[Resx:{key:"FindDataType"}]',
            pager_PageDesc: '[Resx:{key:"Pager_PageDesc"}]',
            templates: '[Resx:{key:"Templates"}]',
            settings: '[Resx:{key:"Settings"}]',
            string: '[Resx:{key:"String"}]',
            bool: '[Resx:{key:"Boolean"}]',
            integer: '[Resx:{key:"Integer"}]',
            float: '[Resx:{key:"Float"}]',
            bytes: '[Resx:{key:"Bytes"}]',
            guid: '[Resx:{key:"Guid"}]',
            uri: '[Resx:{key:"Uri"}]',
            dateTime: '[Resx:{key:"DateTime"}]',
            timeSpan: '[Resx:{key:"TimeSpan"}]',
            deleteDataTypeConfirmMessage: '[Resx:{key:"DeleteDataTypeConfirmMessage"}]',
            no: '[Resx:{key:"No"}]',
            yes: '[Resx:{key:"Yes"}]'
        };

        var settings = {
            isSystemUser: isSystemUser,
            initialPanel: '#content-types-panel',
            contentTypesPanel: '#content-types-panel',
            dataTypesPanel: '#data-types-panel',
            contentTemplatesPanel: '#content-templates-panel',
            settingsPanel: '#settings-panel',
            loadingBarId: '#loadingbar',
            pageSize: 5,
            servicesFramework: $.ServicesFramework(moduleId)
        }

        var manager = new Manager($, ko, settings, localizedSettings);

        manager.init("#DCCmanager-" + moduleId);
    });
</script>
